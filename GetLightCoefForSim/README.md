# Пакет для получения коэффициентов светосбора на космических событиях используемых в моделировании системы АЧС детектора КЕДР

Для сборки нужно сделать make в диретории с пакетом<br />

В файлах .h необходимо прописать актуальные входные/выходные пути для обрабатываемых данных.

В качестве входных данных используются root-файлы получаемые в пакете https://github.com/ivovtin/cosmicMuons <br />

Для вычисления коэффициентов светосбора данные полученные на космических мюонах разбиваются на временные промежутки с интерваломи 1.5-6 месяцев. 

Доклады и статьи где приведено описание получения данных коэффициентов: <br />
https://www.sciencedirect.com/science/article/pii/S0168900219308502?via%3Dihub <br />
https://e-publishing.cern.ch/index.php/CP/article/view/349 <br />
https://iopscience.iop.org/article/10.1088/1748-0221/12/07/C07041 <br />


Порядок получения коэффициентов светосбора: <br />

## 1. Получить коэффициенты светосбора для всех разбиений (28,58,68 - областей) пяти типов счетчиков АЧС с помощью скрипта light_coefficient

Для запуска на batch выполнить команду:
```
qsub batch_start.sh
```

В качестве входных параметров в sh скрипте указываются временной диапазон для которого необходимо получить коэффициенты и тип счетчика. 

После выполнения кода получаем dat-файлы с коэффициентами для каждой области определнного типа счетчика (например см. здексь /store/users/ovtin/SimCalibCoef/).

Результирующие картинки с подгонкой данных для определения коэффициента сбора складываются в директорию res которая является ссылкой на store (например http://kedr.inp.nsk.su/~ovtin/cosmic_light_collection/data_AR_07range/) <br />


## 2. Получение среднего поправочного коэффициента по всем областям разбиения для каждого из 160-ти счетчиков (т.е. поправка от среднего значения) с помощью скрипта light_coefficient_cnt_cor 

Для запуска на batch выполнить команду:
```
qsub batch_start_cor.sh 
```

В качестве входных параметров в sh скрипте указываются временной диапазон для которого необходимо получить коэффициенты и тип счетчика. 

После выполнения кода получаем dat-файлы с поправками для каждого счетчика (например см. здексь /store/users/ovtin/SimCalibCoef/data_Kcnt_all_01range.dat).

Результирующие картинки с подгонкой данных для определения коэффициента сбора складываются в директорию res которая является ссылкой на store (например http://kedr.inp.nsk.su/~ovtin/cosmic_light_collection/data_AR_07range/cntATC100/) <br />

## 3. Для объединения dat-файлов с поправками для счетчиков полученных для различных типов счетчиков можно использовать скрипт mergeFiles.sh

